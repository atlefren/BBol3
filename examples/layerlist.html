<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css">
        #left {
            float: left;
            width: 300px;
        }
        #map {
            height: 500px;
            width: 500px;
            float: left;
            border: 1px solid black;
        }

    </style>
    <link rel="stylesheet" type="text/css" href="../lib/ol3/ol.css">
</head>
<body>

<div id="left">
</div>
<div id="map"></div>

<script type="text/javascript" src="../lib/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="../lib/underscore/underscore-min.js"></script>
<script type="text/javascript" src="../lib/backbone/backbone.js"></script>
<script type="text/javascript" src="../lib/ol3/ol.js"></script>


<script type="text/javascript" src="../dist/ol3core.js"></script>
<script type="text/javascript" src="../dist/ol3listmap.js"></script>
<script type="text/javascript" src="../dist/ol3selectevents.js"></script>
<script type="text/javascript" src="../dist/ol3markers.js"></script>


<script type="text/javascript">
(function () {
    'use strict';

    var data  = {"type":"FeatureCollection","crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:EPSG::32633"}},"features":[{"type":"Feature","geometry":{"type":"Point","coordinates":[597338.46875001,7711349.5717773]},"properties":{"unlocode":"NOSJH","moddednavn":"Senjahopen","navn":"Senjahopen","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":162,"hasBrann":false,"hasTau":false,"kategori_ids":{"11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[613581.17968751,7713724.3608398]},"properties":{"unlocode":"NOBTH","moddednavn":"Bottenhamn","navn":"Bottenhamn","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":163,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6","11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[604034.42187501,7717225.7202148]},"properties":{"unlocode":"NOFSS","moddednavn":"Husøy","navn":"Husøy","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":164,"hasBrann":false,"hasTau":false,"kategori_ids":{"11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[621541.21875001,7681984.6967773]},"properties":{"unlocode":"NOFFB","moddednavn":"Finnfjordbotn","navn":"Finnfjordbotn","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":165,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[617643.17968751,7682830.9467773]},"properties":{"unlocode":"NOFNE","moddednavn":"Finnsnes","navn":"Finnsnes","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":166,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[621292.63281251,7696772.9155273]},"properties":{"unlocode":"NOBGN","moddednavn":"Gibostad","navn":"Gibostad","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":167,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[624027.07812501,7701924.4624023]},"properties":{"unlocode":"NOKKM","moddednavn":"Kårvikhamn","navn":"Kårvikhamn","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":168,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[672273.90625001,7687088.6420898]},"properties":{"unlocode":"NOBGN","moddednavn":"Bergneset","navn":"Bergneset","kategori_id":3,"besoksadresse":"","tlf":"","epost":"bergnesethavn@balsfjord.kommune.no","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":169,"hasBrann":false,"hasTau":false,"kategori_ids":{"2":"2"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":8,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[689706.65625001,7781842.1967773]},"properties":{"unlocode":"NOVNV","moddednavn":"Vannvåg","navn":"Vannvåg","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":170,"hasBrann":false,"hasTau":false,"kategori_ids":{"11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[676822.5,7767900.2280273]},"properties":{"unlocode":"NOKAY","moddednavn":"Karlsøy","navn":"Karlsøy","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":171,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6","11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[248450.75,6607722.2207031]},"properties":{"unlocode":"NOHUR","moddednavn":"Hurum","navn":"Hurum","kategori_id":3,"besoksadresse":"Hurum havner KF Storgaten 17 3484 Holmsbu","tlf":" 32 79 12 66","epost":"info@hurumhavner.no","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":172,"hasBrann":false,"hasTau":false,"kategori_ids":{"2":"2","6":"6","13":"13"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[247541.03125001,6633786.7207031]},"properties":{"unlocode":"NOROE","moddednavn":"Røyken","navn":"Røyken","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":173,"hasBrann":false,"hasTau":false,"kategori_ids":{"2":"2","13":"13"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[256976.71875001,6645189.9394531]},"properties":{"unlocode":"NONEO","moddednavn":"Nesodden","navn":"Nesodden","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":174,"hasBrann":false,"hasTau":false,"kategori_ids":{"1":"1","6":"6"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[253708.07812501,6621918.0644531]},"properties":{"unlocode":"NODRK","moddednavn":"Drøbak","navn":"Drøbak","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":175,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[255114.96875001,6605818.1582031]},"properties":{"unlocode":"NOVSY","moddednavn":"Vestby","navn":"Vestby","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":176,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[241182.25585938,6617565.1660156]},"properties":{"unlocode":"NOSVV","moddednavn":"Svelvik","navn":"Svelvik","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":177,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[703987.125,7726941.7280273]},"properties":{"unlocode":"NOLYN","moddednavn":"Lyngen","navn":"Lyngen","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":179,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6","11":"11","13":"13"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[706576.80687621,7707458.3121508]},"properties":{"unlocode":"NOSKB","moddednavn":"Skibotn","navn":"Skibotn","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":180,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[714924.90625001,7731024.8842773]},"properties":{"unlocode":"NOKAF","moddednavn":"Kåfjord","navn":"Kåfjord","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":181,"hasBrann":false,"hasTau":false,"kategori_ids":{"11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[730136.25,7753429.3530273]},"properties":{"unlocode":"NONOR","moddednavn":"Nordreisa","navn":"Nordreisa","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":182,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6","11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[768471.375,7775093.3530273]},"properties":{"unlocode":"NOKVN","moddednavn":"Kvænangen","navn":"Kvænangen","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":183,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[656872.15625001,7718817.7280273]},"properties":{"unlocode":"NORMJ","moddednavn":"Ramfjordnes","navn":"Ramfjordnes","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":184,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[616548.34375001,7727888.4702148]},"properties":{"unlocode":"NOSOM","moddednavn":"Sommarøy","navn":"Sommarøy","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":185,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6","11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[631267.80468751,7744750.0014648]},"properties":{"unlocode":"NOTMV","moddednavn":"Tromvik","navn":"Tromvik","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":186,"hasBrann":false,"hasTau":false,"kategori_ids":{"6":"6","11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[766641.35937501,7835420.3999023]},"properties":{"unlocode":"NOHVK","moddednavn":"Hasvik","navn":"Hasvik","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":187,"hasBrann":false,"hasTau":false,"kategori_ids":{"11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[769597.94531251,7847881.4311523]},"properties":{"unlocode":"NOBVB","moddednavn":"Breivikbotn","navn":"Breivikbotn","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":188,"hasBrann":false,"hasTau":false,"kategori_ids":{"11":"11"},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[757803.33593751,7851001.9780273]},"properties":{"unlocode":"NOSVR","moddednavn":"Sørvær","navn":"Sørvær","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":189,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}},{"type":"Feature","geometry":{"type":"Point","coordinates":[795424.43750001,7820579.2905273]},"properties":{"unlocode":"NOSTY","moddednavn":"Stjernøya","navn":"Stjernøya","kategori_id":3,"besoksadresse":"","tlf":"","epost":"","hasMobilkran":false,"hasReachStacker":false,"banetilknytning":false,"havn_id":190,"hasBrann":false,"hasTau":false,"kategori_ids":{},"avfallstyper_ids":{},"bunkertypes_ids":{},"hasBunker":false,"max_skipslengde":0,"kaidybde":0,"max_air_draft":9999,"max_pullert_styrke":0,"tilgang_ferskvann":false,"visible":"yes","addedFromDdl":false}}]}

    var mapConfig = {
        "layers": [
            {
                "isBaseLayer": true,
                "source": "WMTS",
                "url": "http://opencache.statkart.no/gatekeeper/gk/gk.open_wmts?",
                "layername": "havbunn_grunnkart",
                "name": "Havbunn Grunnkart"
            },
            {
                "isBaseLayer": true,
                "source": "WMTS",
                "url": "http://opencache.statkart.no/gatekeeper/gk/gk.open_wmts?",
                "layername": "norges_grunnkart",
                "name": "Norges Grunnkart",
                "visible": true
            },
            {
                "isBaseLayer": true,
                "source": "WMTS",
                "url": "http://opencache.statkart.no/gatekeeper/gk/gk.open_wmts?",
                "layername": "topo2",
                "name": "Topo2"
            },
            {
                "source": "WMS",
                "url": "http://wms.geonorge.no/skwms1/wms.nmg?",
                "layername": "Norges_okonomiske_sone",
                "name": "Norges økonomiske sone",
                "tiled": false,
            },
            {
                "source": "WMS",
                "url": "http://wms.geonorge.no/skwms1/wms.nmg?",
                "layername": "Grunnlinje",
                "visible": false,
                "name": "Grunnlinje",
                "tiled": false,
            },
            {
                "source": "GeoJSON",
                "data": data,
                "name": "GeoJSON data"
            }
        ]
    };

    var BaseLayerView = Backbone.View.extend({

        tagName: 'li',

        template: _.template('<input name="bg" type="radio" <% if (visible) { print("checked") } %> ><%= name %>'),

        events: {
            'change input': 'change'
        },

        render: function () {
            this.$el.html(this.template({
                name: this.model.get('name'),
                visible: this.model.get('visible')
            }));
            return this;
        },

        change: function () {
            this.model.collection.trigger('selectLayer', this.model);
        }
    });

    var OverlayLayerView = Backbone.View.extend({

        tagName: 'li',

        template: _.template('<input type="checkbox" <% if (visible) { print("checked") } %>><%= name %>'),

        events: {
            'change input': 'change'
        },

        render: function () {
            this.$el.html(this.template({
                name: this.model.get('name'),
                visible: this.model.get('visible')
            }));
            return this;
        },

        change: function () {
            if (this.$('input').prop('checked')) {
                this.model.collection.trigger('selectLayer', this.model);
            } else {
                this.model.collection.trigger('deselectLayer', this.model);
            }
        }
    });

    var LayersView = Backbone.View.extend({

        tagName: 'ul',

        render: function () {
            var els = this.collection.map(function (layer) {
                return new this.subview({model: layer}).render().$el;
            }, this);
            this.$el.append(els);
            return this;
        }
    });

    var BaseLayersView = LayersView.extend({
        subview: BaseLayerView,
    });

    var OverlayLayersView = LayersView.extend({
        subview: OverlayLayerView
    });

    function initPage(mapConfig, mapEl, listEl) {

        var cp = new bbol3.ConfigParser();
        function mapInit(olmap, layers) {
            var baseLayers = new Backbone.Collection(layers.baseLayers);
            var overlays = new Backbone.Collection(layers.overlays);
            var el = $('#' + listEl);
            baseLayers.on('selectLayer', function (layerModel) {
                cp.setBaseLayer(layerModel.attributes);
            });
            overlays.on('selectLayer', function (layerModel) {
                cp.addOverlay(layerModel.attributes);
            });
            overlays.on('deselectLayer', function (layerModel) {
                cp.hideLayer(layerModel.attributes);
            });
            el.append('<h3>Base layers</h3>');
            el.append(new BaseLayersView({collection: baseLayers}).render().$el);
            el.append('<h3>Overlays</h3>');
            el.append(new OverlayLayersView({collection: overlays}).render().$el);
        }

        cp.setupMap(mapConfig, document.getElementById(mapEl), mapInit);

    }
    initPage(mapConfig, 'map', 'left');


}());
</script>

</body>
</html>
