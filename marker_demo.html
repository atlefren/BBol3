<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css">
        #left {  
            float: left;
            width: 300px;
        }
        #map {
           
            height: 500px;
            width: 500px;
            float: left;   
            border: 1px solid black;
        }

    </style>
    <link rel="stylesheet" type="text/css" href="js/lib/OpenLayers-2.13.1/theme/default/style.css">
</head>
<body>

<h1>Marker demo</h1>

<div id="map"></div>



<script type="text/javascript" src="js/lib/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="js/lib/underscore-min.js"></script>
<script type="text/javascript" src="js/lib/backbone-min.js"></script>
<script type="text/javascript" src="js/lib/OpenLayers-2.13.1/OpenLayers.js"></script>
<script type="text/javascript" src="js/src/mapcore.js"></script>
<script type="text/javascript" src="js/src/Markers.js"></script>
<script type="text/javascript">
(function () {
    'use strict';

    var data = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [                    
                        170088,
                        6686300.5
                    ]
                }
            },
            {
                "type": "Feature",
                    "properties": {      
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [
                        11670,
                        6791912.5                    
                    ]
                }
            },
            {
                "type": "Feature",
                "properties": {      
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [
                        269607,
                        7020738.5                        
                    ]
                }
            },
            {
                "type": "Feature",
                "properties": {      
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [
                        -30981,
                        6886015.5                        
                    ]
                }
            },
            {
                "type": "Feature",
                "properties": {      
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [
                        -57384,
                        6702548.5,                                
                    ]
                }
            }
        ]
    };

    var map = new BW.MapCore.MapConfig(
        'map',
        {
            theme: null, //set theme to null, this means that OpenLayers won't load css
            baseLayers: [
                {id: 2, visible: true}
            ],   
            baseLayerList: [                
                {
                    id: 2,
                    protocol: 'WMTS',
                    name: 'Havbunn Grunnkart',
                    url: 'http://opencache.statkart.no/gatekeeper/gk/gk.open_wmts?',
                    layerName: 'havbunn_grunnkart'                    
                }
            ]
        }
    );

    //create a Markers object and get a styleMap
    var markers = new BW.MapCore.Markers('img/kartpinner');
    var sm = markers.createStyleMap('red', 'md');
    var layer = new OpenLayers.Layer.Vector(
        'Points', 
        {styleMap: sm}
    );

    var format = new OpenLayers.Format.GeoJSON();
    layer.addFeatures(format.read(data));
    map.map.addLayer(layer);
    map.map.zoomToExtent(layer.getDataExtent());

}());
</script>

</body>
</html>
